# æœ¬åœ°è¿è¡Œ

> ğŸ“– **æ–‡æ¡£å¯¼èˆª**ï¼š[è¿”å›é¦–é¡µ](../../README.md) | [å¿«é€Ÿå¼€å§‹](./å¿«é€Ÿå¼€å§‹.md) | [å¼€å‘ç¯å¢ƒ](./å¼€å‘ç¯å¢ƒ.md)

## é€‚ç”¨åœºæ™¯

åç«¯åœ¨æœ¬åœ°è¿è¡Œï¼ŒMySQL åœ¨ Docker å®¹å™¨ä¸­ï¼Œé€‚åˆéœ€è¦è°ƒè¯•ä»£ç çš„æƒ…å†µã€‚

## åˆå§‹åŒ–æ­¥éª¤

### 1. é…ç½®ç¯å¢ƒå˜é‡

```bash
cd backend

# ç¡®ä¿ backend/.env æ–‡ä»¶å­˜åœ¨
# ç¼–è¾‘ backend/.envï¼Œè®¾ç½®ä»¥ä¸‹é…ç½®ï¼š
```

**backend/.env é…ç½®ç¤ºä¾‹**ï¼š
```env
# æ•°æ®åº“é…ç½®ï¼ˆæœ¬åœ°æ¨¡å¼ï¼‰
DB_HOST=localhost          # æœ¬åœ°æ¨¡å¼å¿…é¡»ä½¿ç”¨ localhost
DB_PORT=3306
DB_USERNAME=root
DB_PASSWORD=your_password  # è¯·ä¿®æ”¹ä¸ºå®‰å…¨å¯†ç 
DB_DATABASE=myapp_db

# åº”ç”¨é…ç½®
NODE_ENV=development
PORT=3000
JWT_SECRET=dev-secret-key
CORS_ORIGIN=http://localhost:4000
```

**é‡è¦æç¤º**ï¼š
- `DB_HOST` å¿…é¡»è®¾ç½®ä¸º `localhost`ï¼ˆä¸æ˜¯ `mysql`ï¼‰
- `DB_PASSWORD` å¿…é¡»ä¸ MySQL å®¹å™¨å¯åŠ¨æ—¶ä½¿ç”¨çš„å¯†ç ä¸€è‡´

### 2. å¯åŠ¨ MySQL å®¹å™¨

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
npm run mysql:start
```

ç­‰å¾… MySQL å¯åŠ¨å®Œæˆï¼ˆçº¦ 10-20 ç§’ï¼‰

### 3. æ£€æŸ¥ MySQL çŠ¶æ€

```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
npm run ps

# æŸ¥çœ‹ MySQL æ—¥å¿—ï¼ˆå¯é€‰ï¼‰
npm run mysql:logs
```

### 4. åˆå§‹åŒ–æ•°æ®åº“

```bash
# åœ¨ backend ç›®å½•è¿è¡Œ
cd backend
npm run db:init
```

**é¢„æœŸè¾“å‡º**ï¼š
```
âœ… å·²ä»æ–‡ä»¶åŠ è½½é…ç½®: backend/.env
æ­£åœ¨åˆå§‹åŒ–æ•°æ®åº“ myapp_db...
æ£€æµ‹åˆ°æœ¬åœ°ç¯å¢ƒï¼Œä½¿ç”¨ MySQL å®¹å™¨: yl-mysql-dev
âœ… æ•°æ®åº“ myapp_db åˆ›å»ºæˆåŠŸ
æ•°æ®åº“åˆå§‹åŒ–å®Œæˆï¼
```

### 5. å¯åŠ¨åç«¯æœåŠ¡

```bash
# åœ¨ backend ç›®å½•
npm run start:dev
```

åç«¯æœåŠ¡å°†åœ¨ http://localhost:3000 å¯åŠ¨

### 6. å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆå¯é€‰ï¼‰

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
cd web
npm install
npm run dev
```

å‰ç«¯æœåŠ¡å°†åœ¨ http://localhost:4000 å¯åŠ¨

## éªŒè¯æœåŠ¡

### æ£€æŸ¥æœåŠ¡çŠ¶æ€

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
npm run health
```

### è®¿é—®æœåŠ¡

- **åç«¯ API**: http://localhost:3000/api
- **Swagger æ–‡æ¡£**: http://localhost:3000/api
- **å‰ç«¯åº”ç”¨**: http://localhost:4000ï¼ˆå¦‚æœå·²å¯åŠ¨ï¼‰

## å¸¸è§é—®é¢˜

### é—®é¢˜ 1: æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥ï¼Œæç¤ºå¯†ç ä¸ä¸€è‡´

**åŸå› **ï¼šMySQL å®¹å™¨çš„å¯†ç ä¸ `backend/.env` ä¸­çš„ `DB_PASSWORD` ä¸ä¸€è‡´

**è§£å†³æ–¹æ¡ˆ**ï¼š

**æ–¹æ¡ˆ 1ï¼šåˆ é™¤æ•°æ®å·å¹¶é‡æ–°åˆå§‹åŒ–ï¼ˆæ¨èï¼‰**
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
npm run mysql:stop
docker volume rm yl_mysql_data
npm run mysql:start
# ç­‰å¾… MySQL å¯åŠ¨å
cd backend
npm run db:init
```

**æ–¹æ¡ˆ 2ï¼šä¿®æ”¹ .env æ–‡ä»¶ä½¿ç”¨å½“å‰å¯†ç **
```bash
# ç¼–è¾‘ backend/.envï¼Œå°† DB_PASSWORD æ”¹ä¸º MySQL å®¹å™¨çš„å®é™…å¯†ç 
# ç„¶åé‡æ–°è¿è¡Œ
cd backend
npm run db:init
```

### é—®é¢˜ 2: æ— æ³•è¿æ¥åˆ° MySQL

**æ£€æŸ¥æ­¥éª¤**ï¼š
1. ç¡®è®¤ MySQL å®¹å™¨å·²å¯åŠ¨ï¼š`npm run ps`
2. æ£€æŸ¥ç«¯å£ 3306 æ˜¯å¦è¢«å ç”¨
3. ç¡®è®¤ `DB_HOST=localhost` åœ¨ `.env` æ–‡ä»¶ä¸­

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# é‡å¯ MySQL å®¹å™¨
npm run mysql:stop
npm run mysql:start
```

### é—®é¢˜ 3: åç«¯æœåŠ¡æ— æ³•å¯åŠ¨

**æ£€æŸ¥æ­¥éª¤**ï¼š
1. ç¡®è®¤ MySQL å®¹å™¨å·²å¯åŠ¨å¹¶å¥åº·
2. æ£€æŸ¥ `backend/.env` é…ç½®æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹åç«¯æ—¥å¿—

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
npm run health

# æŸ¥çœ‹ MySQL æ—¥å¿—
npm run mysql:logs
```

## å¸¸ç”¨å‘½ä»¤

```bash
# MySQL ç®¡ç†ï¼ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰
npm run mysql:start      # å¯åŠ¨ MySQL å®¹å™¨
npm run mysql:stop       # åœæ­¢ MySQL å®¹å™¨
npm run mysql:logs       # æŸ¥çœ‹ MySQL æ—¥å¿—
npm run mysql:shell      # è¿›å…¥ MySQL å‘½ä»¤è¡Œ

# æ•°æ®åº“æ“ä½œï¼ˆåœ¨ backend ç›®å½•ï¼‰
cd backend
npm run db:init          # åˆå§‹åŒ–æ•°æ®åº“
npm run db:fix-external-access  # ä¿®å¤å¤–éƒ¨è¿æ¥æƒé™

# åç«¯æœåŠ¡ï¼ˆåœ¨ backend ç›®å½•ï¼‰
npm run start:dev        # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build            # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run start:prod       # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨

# å¥åº·æ£€æŸ¥ï¼ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰
npm run health           # æ£€æŸ¥æ‰€æœ‰æœåŠ¡çŠ¶æ€
npm run verify           # æ£€æŸ¥æœåŠ¡çŠ¶æ€å¹¶æ˜¾ç¤ºå®¹å™¨ä¿¡æ¯
```

## å¿«é€Ÿå¯åŠ¨

ä½¿ç”¨å¿«é€Ÿå¯åŠ¨è„šæœ¬å¯ä»¥ä¸€é”®å®Œæˆ MySQL å¯åŠ¨å’Œæ•°æ®åº“åˆå§‹åŒ–ï¼š

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
npm run quick-start
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. æ£€æŸ¥ `.env` æ–‡ä»¶
2. å¯åŠ¨ MySQL å®¹å™¨
3. ç­‰å¾… MySQL å°±ç»ª
4. åˆå§‹åŒ–æ•°æ®åº“

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹](./å¿«é€Ÿå¼€å§‹.md) - å¿«é€Ÿå¯åŠ¨æŒ‡å—
- [ç¯å¢ƒé…ç½®](./ç¯å¢ƒé…ç½®.md) - ç¯å¢ƒé…ç½®è¯´æ˜
- [å¼€å‘ç¯å¢ƒ](./å¼€å‘ç¯å¢ƒ.md) - Docker å¼€å‘ç¯å¢ƒ
- [æ•°æ®åº“ç®¡ç†](./æ•°æ®åº“ç®¡ç†.md) - æ•°æ®åº“ç®¡ç†è¯´æ˜

