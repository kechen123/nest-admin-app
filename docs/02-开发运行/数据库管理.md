# æ•°æ®åº“ç®¡ç†

> ğŸ“– **æ–‡æ¡£å¯¼èˆª**ï¼š[è¿”å›é¦–é¡µ](../../README.md) | [å¿«é€Ÿå¼€å§‹](./å¿«é€Ÿå¼€å§‹.md)  
> ğŸ“š **è¯¦ç»†æ–‡æ¡£**ï¼š[backend/database/README.md](../../backend/database/README.md)

## å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

è¿™æ˜¯æœ€ç®€å•å¿«æ·çš„æ–¹å¼ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨ï¼š

1. ä» `backend/.env` æ–‡ä»¶è¯»å–é…ç½®
2. åˆ›å»ºæ•°æ®åº“
3. æ‰§è¡Œåˆå§‹åŒ– SQL
4. é…ç½® MySQL å¤–éƒ¨è¿æ¥æƒé™
5. æŸ¥è¯¢å¹¶æ˜¾ç¤ºå®é™…çš„æ•°æ®åº“ä¿¡æ¯

## ä¸¤ç§è¿è¡Œæ¨¡å¼

### æ¨¡å¼ä¸€ï¼šDocker å®¹å™¨å†…è¿è¡Œï¼ˆå®Œæ•´ Docker ç¯å¢ƒï¼‰

**é€‚ç”¨åœºæ™¯**ï¼šæ‰€æœ‰æœåŠ¡éƒ½åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œ

**æ‰§è¡Œæ­¥éª¤**ï¼š

```bash
# 1. åœ¨é¡¹ç›®æ ¹ç›®å½•å¯åŠ¨æ‰€æœ‰æœåŠ¡
npm run dev:up

# 2. ç­‰å¾… MySQL å¯åŠ¨å®Œæˆï¼ˆçº¦ 20-30 ç§’ï¼‰

# 3. åœ¨å®¹å™¨å†…æ‰§è¡Œåˆå§‹åŒ–
npm run backend:init-db
```

**ç‰¹ç‚¹**ï¼š
- è„šæœ¬è‡ªåŠ¨æ£€æµ‹ Docker ç¯å¢ƒ
- ä½¿ç”¨ Docker æœåŠ¡å `mysql` è¿æ¥æ•°æ®åº“
- é…ç½®ä» `backend/.env` è¯»å–ï¼Œä½† `DB_HOST` ä¼šè¢«è‡ªåŠ¨è®¾ç½®ä¸º `mysql`

### æ¨¡å¼äºŒï¼šæœ¬åœ°è¿è¡Œï¼ˆç‹¬ç«‹è¿è¡Œæ¨¡å¼ï¼‰

**é€‚ç”¨åœºæ™¯**ï¼šåç«¯åœ¨æœ¬åœ°è¿è¡Œï¼ŒMySQL åœ¨ Docker å®¹å™¨ä¸­

**æ‰§è¡Œæ­¥éª¤**ï¼š

```bash
# 1. åœ¨é¡¹ç›®æ ¹ç›®å½•å¯åŠ¨ MySQL å®¹å™¨
npm run mysql:start

# 2. ç­‰å¾… MySQL å¯åŠ¨å®Œæˆï¼ˆçº¦ 10-20 ç§’ï¼‰

# 3. åœ¨ backend ç›®å½•æ‰§è¡Œåˆå§‹åŒ–
cd backend
npm run db:init
```

**ç‰¹ç‚¹**ï¼š
- è„šæœ¬æ£€æµ‹åˆ°æœ¬åœ°ç¯å¢ƒ
- ä½¿ç”¨ `docker exec` æ‰§è¡Œ MySQL å‘½ä»¤
- æ‰€æœ‰é…ç½®ä» `backend/.env` æ–‡ä»¶è¯»å–
- æ”¯æŒ Windowsã€Linuxã€Mac è·¨å¹³å°

## ç¯å¢ƒå˜é‡é…ç½®

åˆå§‹åŒ–è„šæœ¬ä¼šä» `backend/.env` æ–‡ä»¶ä¸­è¯»å–ä»¥ä¸‹é…ç½®ï¼š

```env
# æ•°æ®åº“é…ç½®
DB_HOST=localhost          # Docker æ¨¡å¼: mysql, æœ¬åœ°æ¨¡å¼: localhost
DB_PORT=3306
DB_USERNAME=root
DB_PASSWORD=your_password  # è¯·ä¿®æ”¹ä¸ºå®‰å…¨å¯†ç 
DB_DATABASE=myapp_db       # æ•°æ®åº“åç§°
```

## é»˜è®¤æ•°æ®

### é»˜è®¤ç®¡ç†å‘˜è´¦å·

- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `admin123`
- **é‚®ç®±**: `admin@company.com`
- **è§’è‰²**: `super_admin`ï¼ˆè¶…çº§ç®¡ç†å‘˜ï¼‰

âš ï¸ **é‡è¦**: è¯·åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

## å·¥å…·è„šæœ¬

### ç”Ÿæˆå¯†ç å“ˆå¸Œ

```bash
cd backend
node database/generate-password.js <your-password>
```

### æ£€æŸ¥æƒé™è¡¨ parent_id

```bash
cd backend
node database/check-parent-id.js
```

### æµ‹è¯•å¯†ç å“ˆå¸Œ

```bash
cd backend
node database/test-password.js
```

## å¸¸è§é—®é¢˜

### Q: åˆå§‹åŒ–å¤±è´¥ï¼Œæç¤ºå¯†ç ä¸ä¸€è‡´

**A:** è¿™é€šå¸¸æ˜¯å› ä¸º MySQL å®¹å™¨çš„å¯†ç ä¸ `.env` æ–‡ä»¶ä¸­çš„é…ç½®ä¸ä¸€è‡´ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š

**æ–¹æ¡ˆ 1ï¼šåˆ é™¤æ•°æ®å·å¹¶é‡æ–°åˆå§‹åŒ–ï¼ˆæ¨èï¼‰**

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
npm run mysql:stop
docker volume rm yl_mysql_data
npm run mysql:start
# ç­‰å¾… MySQL å¯åŠ¨å
cd backend
npm run db:init
```

**æ–¹æ¡ˆ 2ï¼šä¿®æ”¹ .env æ–‡ä»¶ä½¿ç”¨å½“å‰å¯†ç **

```bash
# ç¼–è¾‘ backend/.envï¼Œå°† DB_PASSWORD æ”¹ä¸º MySQL å®¹å™¨çš„å®é™…å¯†ç 
# ç„¶åé‡æ–°è¿è¡Œ
cd backend
npm run db:init
```

## ç›¸å…³æ–‡æ¡£

- [backend/database/README.md](../../backend/database/README.md) - è¯¦ç»†æ•°æ®åº“æ–‡æ¡£
- [å¿«é€Ÿå¼€å§‹](./å¿«é€Ÿå¼€å§‹.md)
- [ç¯å¢ƒé…ç½®](./ç¯å¢ƒé…ç½®.md)

